{"ast":null,"code":"import _defineProperty from\"C:/Users/HRIDHI SETHI/Documents/exam-alteration-helper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:/Users/HRIDHI SETHI/Documents/exam-alteration-helper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import\"./Forgot_password.css\";import{useState,useEffect}from'react';import{db}from'../firebase';import{Link}from'react-router-dom';import{Form,Button}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ForgetPassword(){var _jsx2;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];//database\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),security=_useState4[0],setSecurity=_useState4[1];//database\nvar _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),docid=_useState6[0],setDocid=_useState6[1];var i;var id;var target;useEffect(function(){db.collection('FacultyDetails').onSnapshot(function(snapshot){setEmail(snapshot.docs.map(function(doc){return doc.data().Email;}));});db.collection('FacultyDetails').onSnapshot(function(snapshot){setSecurity(snapshot.docs.map(function(doc){return doc.data().Security;}));});db.collection('FacultyDetails').onSnapshot(function(snapshot){setDocid(snapshot.docs.map(function(doc){return doc.id;}));});},[]);console.log(docid[0]);function submit_mail(e){e.preventDefault();var request={username:document.getElementById('email').value};for(i=0;i<email.length;i++){if(email[i]==request.username){target=i;id=docid[i];alert('Security Question : who is your favourite hero​');if(security[i]==request.security){alert('Success!!. Please enter new password');}//   window.location.replace('/ahome');\nbreak;}else{console.log(\"failure\");}}}function submit_security(e){e.preventDefault();var request={username:document.getElementById('security').value};if(security[target]==request.username){db.collection('FacultyDetails').doc();alert('Success!!. Please enter new password');}else{console.log(\"failure\");}}function submit_pass(e){e.preventDefault();var request={password:document.getElementById('pass').value,confirm:document.getElementById('confirm').value};if(request.password==request.confirm){alert('successfully updated your password');//updation of password \nvar washingtonRef=db.collection(\"FacultyDetails\").doc(id);return washingtonRef.update({Password:request.password});}else{console.log(\"failure\");}}return/*#__PURE__*/_jsxs(\"div\",{className:\"forget\",children:[/*#__PURE__*/_jsx(Link,{to:\"/fhome\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"bbut\",children:\"Home\"})}),/*#__PURE__*/_jsxs(Form,{inline:true,onSubmit:function onSubmit(e){return submit_mail(e);},children:[/*#__PURE__*/_jsx(Form.Control,{className:\"mb-2 mr-2 \",id:\"email\",placeholder:\"Enter email ID\",type:\"email\"}),/*#__PURE__*/_jsx(Form.Label,{htmlFor:\"inlineFormInputGroupUsername2\",srOnly:true,children:\"Username\"}),/*#__PURE__*/_jsx(Button,(_jsx2={type:\"submit\",className:\"mb-2 ml-2\",variant:\"primary\"},_defineProperty(_jsx2,\"type\",\"submit\"),_defineProperty(_jsx2,\"value\",\"Submit\"),_defineProperty(_jsx2,\"children\",\"Submit\"),_jsx2))]}),/*#__PURE__*/_jsxs(Form,{inline:true,onSubmit:function onSubmit(e){return submit_security(e);},children:[/*#__PURE__*/_jsx(Form.Control,{className:\"mb-2  mr-2 \",id:\"security\",placeholder:\"answer for security\",type:\"text\"}),/*#__PURE__*/_jsx(Form.Label,{htmlFor:\"inlineFormInputGroupUsername2\",srOnly:true,children:\"Username\"}),/*#__PURE__*/_jsx(Button,{className:\"mb-2 ml-2\",variant:\"primary\",type:\"submit\",value:\"security\",children:\"Verify\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(e){return submit_pass(e);},children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"exampleForm.ControlInput1\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"New Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",id:\"pass\",placeholder:\"enter new password\"})]}),/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm password\"}),/*#__PURE__*/_jsx(Form.Control,{className:\"mb-2 mr-sm-2 \",id:\"confirm\",placeholder:\"Re-enter password\",type:\"password\"}),/*#__PURE__*/_jsx(Button,{variant:\"success\",type:\"submit\",value:\"submit\",className:\"mb-2 mt-3 ml-20\",children:\"Change Password\"}),' ']})]});}","map":{"version":3,"sources":["C:/Users/HRIDHI SETHI/Documents/exam-alteration-helper/src/Componets/password_change.js"],"names":["React","useState","useEffect","db","Link","Form","Button","ForgetPassword","email","setEmail","security","setSecurity","docid","setDocid","i","id","target","collection","onSnapshot","snapshot","docs","map","doc","data","Email","Security","console","log","submit_mail","e","preventDefault","request","username","document","getElementById","value","length","alert","submit_security","submit_pass","password","confirm","washingtonRef","update","Password"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport \"./Forgot_password.css\";\r\nimport { useState,useEffect } from 'react';\r\nimport {db} from '../firebase';\r\nimport { Link} from 'react-router-dom';\r\n\r\nimport { Form,Button} from 'react-bootstrap';\r\n\r\nexport default function ForgetPassword() {\r\n   \r\n  const [email,setEmail]=useState([]);//database\r\n  const [security,setSecurity]=useState([]);//database\r\n  const [docid,setDocid]=useState([]);\r\n   var i;\r\n   var id;\r\n  var target ;\r\n  useEffect(() =>{\r\n    db.collection('FacultyDetails').onSnapshot(snapshot =>{\r\n      setEmail(snapshot.docs.map(doc => doc.data().Email))\r\n    })\r\n    db.collection('FacultyDetails').onSnapshot(snapshot =>{\r\n      setSecurity(snapshot.docs.map(doc => doc.data().Security))\r\n    })\r\n    db.collection('FacultyDetails').onSnapshot(snapshot =>{\r\n      setDocid(snapshot.docs.map(doc => doc.id))\r\n    })\r\n  },[]);\r\n  console.log(docid[0]);\r\n\r\n\r\n  function submit_mail(e){\r\n    e.preventDefault();\r\n    let request =  {\r\n        username:document.getElementById('email').value,\r\n    }\r\n    for(i=0;i<email.length;i++){\r\n    if(email[i]==request.username ){\r\n      target=i;\r\n      id=docid[i];\r\n      alert('Security Question : who is your favourite hero​');\r\n      if(security[i]==request.security ){\r\n        alert('Success!!. Please enter new password');\r\n      }\r\n        \r\n    //   window.location.replace('/ahome');\r\n      break;\r\n    }\r\n    else{\r\n      console.log(\"failure\");\r\n    }\r\n  }\r\n  \r\n  }\r\n\r\n  function submit_security(e){\r\n    e.preventDefault();\r\n    let request =  {\r\n        username:document.getElementById('security').value,\r\n    }\r\n    \r\n\r\n    if(security[target]==request.username ){\r\n\r\n      db.collection('FacultyDetails').doc()\r\n\r\n        alert('Success!!. Please enter new password');\r\n\r\n      }\r\n        \r\n      \r\n    \r\n    else{\r\n      console.log(\"failure\");\r\n    }\r\n  \r\n  \r\n  }\r\n\r\n\r\n  function submit_pass(e){\r\n    e.preventDefault();\r\n    let request =  {\r\n        password:document.getElementById('pass').value,\r\n        confirm:document.getElementById('confirm').value,\r\n    }\r\n    if(request.password == request.confirm){\r\n      alert('successfully updated your password');\r\n     //updation of password \r\n     var washingtonRef = db.collection(\"FacultyDetails\").doc(id);\r\n     return washingtonRef.update({\r\n         Password: request.password\r\n     })\r\n  \r\n    }\r\n    else{\r\n      console.log(\"failure\");\r\n    }\r\n  }\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"forget\">\r\n          <Link to=\"/fhome\"><Button variant=\"primary\" className=\"bbut\">Home</Button></Link>\r\n   <Form inline onSubmit={(e)=>submit_mail(e)}>\r\n  \r\n  <Form.Control\r\n    className=\"mb-2 mr-2 \"\r\n    id=\"email\"\r\n    placeholder=\"Enter email ID\"\r\n    type=\"email\"\r\n  />\r\n  <Form.Label htmlFor=\"inlineFormInputGroupUsername2\" srOnly>\r\n    Username\r\n  </Form.Label>\r\n  \r\n  <Button type=\"submit\" className=\"mb-2 ml-2\" variant=\"primary\" type=\"submit\" value=\"Submit\">\r\n    Submit\r\n  </Button>\r\n\r\n\r\n\r\n  \r\n     \r\n</Form>\r\n<Form inline onSubmit={(e)=>submit_security(e)} >\r\n  <Form.Control\r\n    className=\"mb-2  mr-2 \"\r\n    id=\"security\"\r\n    placeholder=\"answer for security\"\r\n    type=\"text\"\r\n  />\r\n  <Form.Label htmlFor=\"inlineFormInputGroupUsername2\" srOnly>\r\n    Username\r\n  </Form.Label>\r\n  \r\n  <Button className=\"mb-2 ml-2\" variant=\"primary\" type=\"submit\" value=\"security\">\r\n    Verify\r\n  </Button>\r\n\r\n</Form>\r\n\r\n  <hr/>\r\n<Form  onSubmit={(e)=>submit_pass(e)}\r\n   >\r\n  <Form.Group controlId=\"exampleForm.ControlInput1\">\r\n    <Form.Label>New Password</Form.Label>\r\n    <Form.Control type=\"password\"  id =\"pass\" placeholder=\"enter new password\" />\r\n  </Form.Group>\r\n\r\n   <Form.Label>Confirm password</Form.Label>\r\n  <Form.Control\r\n    className=\"mb-2 mr-sm-2 \"\r\n    id=\"confirm\"\r\n    placeholder=\"Re-enter password\"\r\n    type=\"password\"\r\n  />\r\n\r\n    <Button variant=\"success\" type=\"submit\" value = \"submit\" className=\"mb-2 mt-3 ml-20\" >Change Password</Button>{' '}\r\n\r\n\r\n  </Form>\r\n\r\n  \r\n  \r\n\r\n    </div>\r\n    )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}